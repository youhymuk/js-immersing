<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Виселица</title>
	<style>
		body {
			background: #9094A8 url(1.gif) no-repeat top/60%;
		}
		h1 {
			font-family: Arial, Tahoma, sans-serif;
			font-weight: bold;
			text-align: center;
			text-transform: uppercase;
		}
	</style>
</head>
<body>
		<h1>Виселица</h1>
	<script>
		function pickWord () {
			 // Возвращает случайно выбранное слово
			var words = [
			"программа",
			"обезьяна",
			"прекрасный",
			"оладушек",
			"компьютер",
			"зеленый",
			"родители",
			"автомобиль",
			"независимость",
			"гражданство",
			"политика"
		];
			 return words[Math.floor(Math.random() * words.length)];
		};

		function setupAnswerArray(word) {
			 // Возвращает итоговый массив для заданного слова word
			var answerArray = []; 
			for (var i = 0; i < word.length; i++) {
				answerArray[i] = "_";
			}

			return answerArray;
		};

		function showPlayerProgress(answerArray) {
			// Отображает текущее состояние игры
			alert ('Осталось ' + remainingLetters + ' букв  ' + answerArray.join(' ')); 
		};

		function getGuess() {
			// Запрашивает ответ игрока с помощью prompt
			return prompt("Угадайте букву или нажмите Отмена для выхода из игры.");
		};
		
		function updateGameState(guess, word, answerArray) {
		// Обновляет answerArray согласно ответу игрока (guess)
		// возвращает число, обозначающее, сколько раз буква guess
		// встречается в слове, чтобы можно было обновить значение
		// remainingLetters
			var appear = 0;
			for (var j = 0; j < word.length; j++) {
				if (word[j] === guess.toLowerCase()) {
					if (answerArray[j] == '_') {
						answerArray[j] = guess.toLowerCase();
						appear++;
					} else {
						alert('Буквы ' + guess + ' больше нет в этом слове!');
					}							
				}
			}
			return appear;
		};
		function result (answerArray) {
			if (answerArray.join('') == word) {
				alert ("Отлично! Было загадано слово " + word);
			} else {
				alert('Слово не было отгадано, попробуй еще раз!');
			}// выводим результат игры
		};

		//загаданное слово
		var word = pickWord(); 
		//итоговый массив
		var answerArray = setupAnswerArray(word); 
		//сколько букв осталось угадать
		var remainingLetters = word.length;

		var question = confirm ('Сыграем?');

		if (question == true) {
			var name = prompt('Как тебя зовут?');
			alert('Привет ' + name + '!');
			alert ('Загадано слово из ' + word.length + ' букв.');

			//игровой цикл
			while (remainingLetters > 0) {
				// Показываем состояние игры
				showPlayerProgress(answerArray);
				// Запрашиваем вариант ответа
				var guess = getGuess(); 
				if (guess === null) {
					// Выходим из игрового цикла
					break;
				} else if (guess.length !== 1) {
					alert ("Пожалуйста, введите одну букву!");
				} else {
					var correctGuesses = updateGameState(guess, word, answerArray);
					remainingLetters -= correctGuesses;
				} 
			}
			
			result(answerArray);
		} else {
			alert('Приходи в другой раз!');	
		}
	</script>
</body>
</html>